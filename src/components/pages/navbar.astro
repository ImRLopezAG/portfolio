---
import { ModeToggle } from '@ui/mode-toggle';
import { Menu, X } from 'lucide-react';
import Logo from '@components/logo.astro';
const navLinks = [
  { href: '/#home', label: 'Home' },
  { href: '/#about', label: 'About' },
  { href: '/#experience', label: 'Experience' },
  { href: '/#skills', label: 'Skills' },
  { href: '/#projects', label: 'Projects' },
  { href: '/blog', label: 'Blog' },
  { href: '/#contact', label: 'Contact' },
];
---

<header
  landing-header
  class='fixed top-0 right-0 left-0 z-50 py-4 transition-all duration-300 bg-background'
>
  <div class='container mx-auto flex items-center justify-between px-4'>
    <a
      href='/'
      class='bg-gradient-to-r from-primary to-purple-600 bg-clip-text font-bold text-transparent text-xl'
    >
      <Logo class='h-6 text-foreground' />
    </a>

    <div class='group'>
      <div class='flex items-center gap-2 md:hidden'>
        <ModeToggle client:visible />
        <input type='checkbox' id='menu-toggle' class='hidden' />
        <label
          for='menu-toggle'
          aria-label='Menu'
          class='variant-ghost size-icon cursor-pointer'
        >
          <span
            class='block group-has-[:checked]:hidden transition-opacity duration-300'
          >
            <Menu className='size-5' />
          </span>
          <span
            class='hidden group-has-[:checked]:block transition-opacity duration-300'
          >
            <X className='size-5' />
          </span>
        </label>
      </div>

      {/* Mobile Dropdown Menu */}
      <div
        class='fixed inset-0 top-16 z-40 bg-background p-4 hidden group-has-[:checked]:block'
      >
        <nav class='flex flex-col gap-4'>
          {
            navLinks.map((link) => (
              <a
                href={link.href}
                class='border-border border-b py-2 font-medium text-lg transition-colors hover:text-primary'
                onclick="document.getElementById('menu-toggle').checked = false"
              >
                {link.label}
              </a>
            ))
          }
        </nav>
      </div>
    </div>

    {/* Desktop Navbar */}
    <div class='hidden items-center gap-6 md:flex'>
      <nav class='flex items-center gap-6'>
        {
          navLinks.map((link) => (
            <a
              href={link.href}
              class='font-medium text-sm transition-colors hover:text-primary p-2'
            >
              {link.label}
            </a>
          ))
        }
      </nav>
      <ModeToggle client:visible />
    </div>
  </div>
  <div
    id='menu-backdrop'
    class='bg-slate-300/50 absolute backdrop-blur-lg rounded translate-x-[var(--left)] translate-y-[var(--top)] left-0 top-0 w-[var(--width)] h-[var(--height)] transition-all duration-500 ease-in-out opacity-0 -z-10'
  >
  </div>
</header>

<script is:inline>
  const listItem = document.querySelectorAll('nav a');
  const menuBackDrop = document.querySelector('#menu-backdrop');

  listItem.forEach((item) => {
    item.addEventListener('mouseenter', () => {
      const { left, top, width, height } = item.getBoundingClientRect();

      menuBackDrop.style.setProperty('--left', `${left}px`);
      menuBackDrop.style.setProperty('--top', `${top}px`);
      menuBackDrop.style.setProperty('--width', `${width}px`);
      menuBackDrop.style.setProperty('--height', `${height}px`);

      menuBackDrop.style.opacity = '1';
      menuBackDrop.style.visibility = 'visible';
    });

    item.addEventListener('mouseleave', () => {
      menuBackDrop.style.opacity = '0';
      menuBackDrop.style.visibility = 'hidden';
    });
  });
</script>
